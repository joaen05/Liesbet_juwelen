<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Mijn Flask App{% endblock %}</title>
    <!-- Laad Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Voeg toe aan bestaande style tag */
        input:read-only {
            background-color: #f3f4f6;
            cursor: not-allowed;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">
<nav class="bg-blue-600 p-4 shadow-md rounded-b-lg sticky top-0 z-10">
    <div class="container mx-auto flex flex-wrap items-center justify-between">
        <a href="{{ url_for('home') }}"
           class="text-white text-2xl font-bold rounded-md p-2 hover:bg-blue-700 transition-colors duration-200">Jewerly
            by Lizzy</a>
        <div class="block lg:hidden">
            <button id="nav-toggle"
                    class="flex items-center px-3 py-2 border rounded text-blue-200 border-blue-400 hover:text-white hover:border-white">
                <svg class="fill-current h-3 w-3" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><title>
                    Menu</title>
                    <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-6z"/>
                </svg>
            </button>
        </div>
        <div class="w-full flex-grow lg:flex lg:items-center lg:w-auto hidden" id="nav-content">
            <ul class="text-lg lg:flex-grow lg:flex lg:justify-end">
                <li class="relative group">
                    <button id="producten-dropdown-toggle"
                            class="flex items-center gap-1 mt-4 lg:mt-0 text-blue-200 hover:text-white p-2 rounded-md hover:bg-blue-700 transition-colors duration-200 focus:outline-none">
                        Producten
                        <svg id="producten-arrow" class="h-4 w-4 transform transition-transform duration-200"
                             fill="none" stroke="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>

                    <div id="producten-dropdown-menu"
                         class="absolute hidden bg-white text-gray-800 rounded-lg shadow-xl py-2 mt-2 z-20 w-56 border border-gray-200 transition-all duration-200">
                        <a href="{{ url_for('producten_per_categorie', categorie='oorbellen') }}"
                           class="block px-5 py-2 hover:bg-gray-100 hover:pl-6 rounded-md transition-all duration-200">Oorbellen</a>
                        <a href="{{ url_for('producten_per_categorie', categorie='Kinderoorbellen') }}"
                           class="block px-5 py-2 hover:bg-gray-100 hover:pl-6 rounded-md transition-all duration-200">Kinderoorbellen</a>
                        <a href="{{ url_for('producten_per_categorie', categorie='kettingen') }}"
                           class="block px-5 py-2 hover:bg-gray-100 hover:pl-6 rounded-md transition-all duration-200">Kettingen</a>
                        <a href="{{ url_for('producten_per_categorie', categorie='Armbanden') }}"
                           class="block px-5 py-2 hover:bg-gray-100 hover:pl-6 rounded-md transition-all duration-200">Armbanden</a>
                        <a href="{{ url_for('producten_per_categorie', categorie='Moeder-Dochter') }}"
                           class="block px-5 py-2 hover:bg-gray-100 hover:pl-6 rounded-md transition-all duration-200">Moeder/Dochter sets</a>
                    </div>
                </li>
                <li>
                    <a href="{{ url_for('contact') }}"
                       class="block mt-4 lg:inline-block lg:mt-0 text-blue-200 hover:text-white mr-6 p-2 rounded-md hover:bg-blue-700 transition-colors duration-200">Contact</a>
                </li>
                {% if 'ingelogd' in session and session['ingelogd'] %}
                <li class="relative group">
                    <button id="user-dropdown-toggle"
                            class="flex items-center gap-1 mt-4 lg:mt-0 text-white hover:text-white p-2 rounded-md hover:bg-blue-700 transition-colors duration-200 focus:outline-none">
                        {{ session['gebruikersnaam'] }}
                        <svg id="user-arrow" class="h-4 w-4 transform transition-transform duration-200"
                             fill="none" stroke="currentColor" viewBox="0 0 24 24"
                             xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>

                    <div id="user-dropdown-menu"
                         class="absolute right-0 hidden bg-white text-gray-800 rounded-lg shadow-xl py-2 mt-2 z-20 w-48 border border-gray-200 transition-all duration-200">
                        <a href="{{ url_for('profiel') }}"
                           class="flex items-center px-5 py-2 hover:bg-gray-100 hover:pl-6 rounded-md transition-all duration-200">
                            <span>Gegevens bewerken</span>
                            <svg class="ml-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                      d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                            </svg>
                        </a>
                        <a href="{{ url_for('uitloggen') }}"
                           class="block px-5 py-2 hover:bg-gray-100 hover:pl-6 rounded-md transition-all duration-200">Uitloggen</a>
                    </div>
                </li>
                {% endif %}
            </ul>
        </div>
    </div>
</nav>

<main class="container mx-auto mt-8 p-4 flex-grow">
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="mb-4">
                {% for category, message in messages %}
                    <div class="px-4 py-2 rounded-md {% if category == 'error' %}bg-red-100 text-red-800{% else %}bg-green-100 text-green-800{% endif %}">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
</main>

<script>
    // Toggle navigatie op mobiel
    document.getElementById('nav-toggle').onclick = function () {
        document.getElementById('nav-content').classList.toggle('hidden');
    }

    // Producten dropdown
    const productenDropdownToggle = document.getElementById('producten-dropdown-toggle');
    const productenDropdownMenu = document.getElementById('producten-dropdown-menu');
    const productenArrowIcon = document.getElementById('producten-arrow');

    productenDropdownToggle.addEventListener('click', function (event) {
        event.stopPropagation();
        productenDropdownMenu.classList.toggle('hidden');
        productenArrowIcon.classList.toggle('rotate-180');
    });

    // User dropdown (als die bestaat)
    const userDropdownToggle = document.getElementById('user-dropdown-toggle');
    if (userDropdownToggle) {
        const userDropdownMenu = document.getElementById('user-dropdown-menu');
        const userArrowIcon = document.getElementById('user-arrow');

        userDropdownToggle.addEventListener('click', function (event) {
            event.stopPropagation();
            userDropdownMenu.classList.toggle('hidden');
            userArrowIcon.classList.toggle('rotate-180');
        });
    }

    window.addEventListener('click', function (event) {
        // Sluit producten dropdown
        if (!productenDropdownToggle.contains(event.target) && !productenDropdownMenu.contains(event.target)) {
            productenDropdownMenu.classList.add('hidden');
            productenArrowIcon.classList.remove('rotate-180');
        }

        // Sluit user dropdown (als die bestaat)
        const userDropdownToggle = document.getElementById('user-dropdown-toggle');
        if (userDropdownToggle) {
            const userDropdownMenu = document.getElementById('user-dropdown-menu');
            if (!userDropdownToggle.contains(event.target) && (!userDropdownMenu || !userDropdownMenu.contains(event.target))) {
                if (userDropdownMenu) userDropdownMenu.classList.add('hidden');
                const userArrowIcon = document.getElementById('user-arrow');
                if (userArrowIcon) userArrowIcon.classList.remove('rotate-180');
            }
        }
    });
</script>
</body>
</html>