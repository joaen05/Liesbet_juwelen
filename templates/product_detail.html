{% extends "base.html" %}

{% block title %}{{ product.naam }}{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto px-4 py-8">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- Afbeeldingen Carrousel -->
        <div class="bg-white rounded-lg shadow-lg overflow-hidden">
            <div id="productCarousel" class="relative">
                <!-- Hoofdafbeelding -->
                <div class="carousel-item active">
                    <img src="{{ url_for('static', filename='uploads/' + kleuren[0].foto) }}"
                         alt="{{ product.naam }}"
                         class="w-full h-auto object-cover rounded-lg"
                         id="mainImage">
                </div>
                <!-- Hover afbeelding -->
                <div class="carousel-item">
                    <img src="{{ url_for('static', filename='uploads/' + kleuren[0].hover_foto) }}"
                         alt="{{ product.naam }}"
                         class="w-full h-auto object-cover rounded-lg"
                         id="hoverImage">
                </div>

                <!-- Carrousel controls -->
                <button class="carousel-control-prev absolute left-0 top-1/2 -translate-y-1/2 p-2 bg-black bg-opacity-50 text-white rounded-r-lg"
                        onclick="prevSlide()">
                    ❮
                </button>
                <button class="carousel-control-next absolute right-0 top-1/2 -translate-y-1/2 p-2 bg-black bg-opacity-50 text-white rounded-l-lg"
                        onclick="nextSlide()">
                    ❯
                </button>
            </div>
        </div>

        <!-- Product informatie -->
        <div class="bg-white p-6 rounded-lg shadow-lg">
            <h1 class="text-3xl font-bold text-gray-800 mb-4">{{ product.naam }}</h1>
            <p class="text-xl text-blue-600 font-bold mb-4">€{{ "%.2f"|format(product.prijs) }}</p>

            <div class="mb-6">
                <p class="text-gray-700">{{ product.beschrijving }}</p>
            </div>

            <!-- Kleur selectie -->
            {% if kleuren|length > 1 %}
            <div class="mb-6">
                <label for="kleurSelect" class="block text-sm font-medium text-gray-700 mb-2">Kies een kleur:</label>
                <select id="kleurSelect" class="w-full p-2 border border-gray-300 rounded-md">
                    {% for kleur in kleuren %}
                    <option value="{{ loop.index0 }}"
                            data-foto="{{ kleur.foto }}"
                            data-hover-foto="{{ kleur.hover_foto }}">
                        {{ kleur.kleur_naam }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            {% endif %}

            <!-- Interesse knop -->
            <div class="mt-8 border-t pt-6">
                <p class="text-lg text-gray-700 mb-4">Interesse in dit product?</p>
                <a href="{{ url_for('contact') }}" class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition-colors duration-200">
                    Neem contact op
                </a>
            </div>

            <!-- Terug knop -->
            <div class="mt-4">
                <a href="{{ url_for('producten_per_categorie', categorie=categorie) }}" class="text-blue-600 hover:text-blue-800 font-medium">
                    ← Terug naar {{ categorie }}
                </a>
            </div>
        </div>
    </div>
</div>

<style>
    .carousel-item {
        display: none;
        transition: opacity 0.5s ease;
    }
    .carousel-item.active {
        display: block;
    }
</style>

<script>
    let currentSlide = 0;
    const slides = document.querySelectorAll('.carousel-item');

    function showSlide(n) {
        slides.forEach(slide => slide.classList.remove('active'));
        slides[n].classList.add('active');
    }

    function nextSlide() {
        currentSlide = (currentSlide + 1) % slides.length;
        showSlide(currentSlide);
    }

    function prevSlide() {
        currentSlide = (currentSlide - 1 + slides.length) % slides.length;
        showSlide(currentSlide);
    }

    // Auto-rotate slides every 5 seconds
    setInterval(nextSlide, 5000);

    // Kleur selectie functionaliteit
    document.getElementById('kleurSelect').addEventListener('change', function() {
        const selectedOption = this.options[this.selectedIndex];
        const mainImage = document.getElementById('mainImage');
        const hoverImage = document.getElementById('hoverImage');

        mainImage.src = '{{ url_for('static', filename='uploads/') }}' + selectedOption.dataset.foto;
        hoverImage.src = '{{ url_for('static', filename='uploads/') }}' + selectedOption.dataset.hoverFoto;
    });
</script>
{% endblock %}